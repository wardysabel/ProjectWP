!function(a){a.fn.dataTableExt.oApi.fnGetColumnData=a.fn.dataTable.fnVersionCheck("1.10.0")?function(a,b){return a.oInstance.api().column(b,{search:"applied"}).data().sort().unique()}:function(a,b,c,d,e){if("undefined"==typeof b)return new Array;"undefined"==typeof c&&(c=!0),"undefined"==typeof d&&(d=!0),"undefined"==typeof e&&(e=!0);var f;f=1==d?a.aiDisplay:a.aiDisplayMaster;for(var g=new Array,h=0,i=f.length;i>h;h++){var j=f[h],k=this.fnGetData(j,b);(1!=e||0!=k.length)&&(1==c&&jQuery.inArray(k,g)>-1||g.push(k))}return g};var b=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},c=function(b){var c=this,e="";return c.$WidgetContainer=a('<div class="column-filter-widgets"></div>'),c.$MenuContainer=c.$WidgetContainer,c.$TermContainer=null,c.aoWidgets=[],c.sSeparator="","oColumnFilterWidgets"in b.oInit&&("aiExclude"in b.oInit.oColumnFilterWidgets&&(e="|"+b.oInit.oColumnFilterWidgets.aiExclude.join("|")+"|"),"bGroupTerms"in b.oInit.oColumnFilterWidgets&&b.oInit.oColumnFilterWidgets.bGroupTerms&&(c.$MenuContainer=a('<div class="column-filter-widget-menus"></div>'),c.$TermContainer=a('<div class="column-filter-widget-selected-terms"></div>').hide())),a.each(b.aoColumns,function(f){var g=a('<div class="column-filter-widget"></div>');e.indexOf("|"+f+"|")<0&&(c.aoWidgets.push(new d(g,b,f,c)),c.$MenuContainer.append(g))}),c.$TermContainer&&(c.$WidgetContainer.append(c.$MenuContainer),c.$WidgetContainer.append(c.$TermContainer)),b.aoDrawCallback.push({name:"ColumnFilterWidgets",fn:function(){a.each(c.aoWidgets,function(a,b){b.fnDraw()})}}),c};c.prototype.getContainer=function(){return this.$WidgetContainer.get(0)};var d=function(b,c,d,e){var f=this;f.iColumn=d,f.oColumn=c.aoColumns[d],f.$Container=b,f.oDataTable=c.oInstance,f.asFilters=[],f.sSeparator="",f.bSort=!0,f.iMaxSelections=-1,"oColumnFilterWidgets"in c.oInit&&("sSeparator"in c.oInit.oColumnFilterWidgets&&(f.sSeparator=c.oInit.oColumnFilterWidgets.sSeparator),"iMaxSelections"in c.oInit.oColumnFilterWidgets&&(f.iMaxSelections=c.oInit.oColumnFilterWidgets.iMaxSelections),"aoColumnDefs"in c.oInit.oColumnFilterWidgets&&a.each(c.oInit.oColumnFilterWidgets.aoColumnDefs,function(b,c){var e="|"+c.aiTargets.join("|")+"|";e.indexOf("|"+d+"|")>=0&&a.each(c,function(a,b){f[a]=b})})),f.$Select=a("<select></select>").addClass("widget-"+f.iColumn).change(function(){var b,c,d,g=f.$Select.val();""!==g&&(b=a("<div>"+g+"</div>").text(),c=a('<a class="filter-term" href="#"></a>').addClass("filter-term-"+b.toLowerCase().replace(/\W/g,"")).text(b).click(function(){return f.asFilters=a.grep(f.asFilters,function(a){return a!=g}),c.remove(),e.$TermContainer&&0===e.$TermContainer.find(".filter-term").length&&e.$TermContainer.hide(),f.$Select.append(a("<option></option>").val(g).text(b)),f.iMaxSelections>0&&f.iMaxSelections>f.asFilters.length&&f.$Select.prop("disabled",!1),f.bSort&&f.fnSortOptions(),f.fnFilter(),!1}),f.asFilters.push(g),e.$TermContainer?(e.$TermContainer.show(),e.$TermContainer.prepend(c)):f.$Select.after(c),d=f.$Select.children("option:selected"),f.$Select.val(""),d.remove(),f.iMaxSelections>0&&f.iMaxSelections<=f.asFilters.length&&f.$Select.prop("disabled",!0),f.fnFilter())}),f.$Container.append(f.$Select),f.fnDraw()};if(d.prototype.fnFilter=function(){var c,d,e=this,f=[];e.asFilters.length>0?(a.each(e.asFilters,function(a,c){f.push(b(c))}),c=e.sSeparator?"(^|"+e.sSeparator+")(":"^(",d=e.sSeparator?")("+e.sSeparator+"|$)":")$",e.oDataTable.fnFilter(c+f.join("|")+d,e.iColumn,!0,!1)):e.oDataTable.fnFilter("",e.iColumn)},d.prototype.fnSortOptions=function(){function b(b,d){var e=a(b).text(),f=a(d).text();return c.hasOwnProperty("fnSort")?c.fnSort(e,f):f>e?-1:e==f?0:1}var c=this,d=c.$Select.find("option").slice(1);d.sort(b),c.$Select.append(d)},d.prototype.fnDraw=function(){var b,c=this,d={},e=[];if(0===c.asFilters.length){b=c.oDataTable.fnGetColumnData(c.iColumn),a.each(b,function(b,f){var g=c.sSeparator?f.split(new RegExp(c.sSeparator)):[f];a.each(g,function(a,b){d.hasOwnProperty(b)||(d[b]=!0,e.push(b))})});var f=c.oColumn.sTitle;"&nbsp;"===f&&(f=""),c.$Select.empty().append(a("<option></option>").val("").text(f)),a.each(e,function(b,d){var e;e=a("<div>"+d+"</div>").text(),c.$Select.append(a("<option></option>").val(d).text(e))}),e.length>1?(c.bSort&&c.fnSortOptions(),c.$Select.prop("disabled",!1)):c.$Select.prop("disabled",!0)}},"function"!=typeof a.fn.dataTable||"function"!=typeof a.fn.dataTableExt.fnVersionCheck||!a.fn.dataTableExt.fnVersionCheck("1.7.0"))throw"Warning: ColumnFilterWidgets requires DataTables 1.7 or greater - www.datatables.net/download";a.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b=new c(a);return b.getContainer()},cFeature:"W",sFeature:"ColumnFilterWidgets"})}(jQuery);